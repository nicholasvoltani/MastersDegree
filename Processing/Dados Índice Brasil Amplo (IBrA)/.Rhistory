# Lendo dados
ibra <- read_delim("C:/Users/nicho/Documents/MastersDegree/DataInputs/Dados Índice Brasil Amplo (IBrA)/Cotacoes18a25.csv",
delim=";")
library(tidyverse)
# Lendo dados
ibra <- read_delim("C:/Users/nicho/Documents/MastersDegree/DataInputs/Dados Índice Brasil Amplo (IBrA)/Cotacoes18a25.csv",
delim=";")
# Preprocessamento: Arrumando variável de data
ibra2 <- ibra %>%
mutate(Data = Data %>%
str_replace_all("/", "-") %>%
dmy(),
mes = month(Data),
ano = year(Data)) %>%
relocate(mes, .after = Data) %>%
relocate(ano, .after = mes)
lag(ibra2$mes)
# Dataframe de retornos $\frac{P_t}{P_{t-1}} - 1$
retornos_diarios <- ibra2 %>%
arrange(Data) %>%
mutate(across(-Data, ~ .x / lag(.x) - 1))
View(retornos_diarios)
# Dataframe de retornos $\frac{P_t}{P_{t-1}} - 1$
retornos_diarios <- ibra2 %>%
arrange(Data) %>%
mutate(across(-Data, ~ .x / lag(.x) - 1),
mes = month(Data),
ano = year(Data)) %>%
relocate(mes, .after = Data) %>%
relocate(ano, .after = mes)
View(retornos_diarios)
View(ibra2)
View(ibra)
# Ações do portfolio
acoes_escolhidas <- c("GFSA3",
"GGBR4",
"GOAU4",
"GRND3",
"GUAR3")
portfolio <- ibra2 %>%
select(mes, ano, acoes_escolhidas)
portfolio <- ibra2 %>%
select(mes, ano, all_of(acoes_escolhidas))
View(portfolio)
portfolio <- ibra2 %>%
select(Data, mes, ano, all_of(acoes_escolhidas))
View(portfolio)
portfolio <- retornos_diarios %>%
select(Data, mes, ano, all_of(acoes_escolhidas))
View(portfolio)
View(ibra)
colnames(ibra)
colunas_mercado <- c("CDI 252 dias",
"IBOV",
"IBRA")
portfolio <- retornos_diarios %>%
select(Data,
mes,
ano,
all_of(acoes_escolhidas),
all_of(colunas_mercado))
View(portfolio)
# Agregados mensais
retornos_mensais <- retornos_acoes %>%
select(-Data) %>%
# mutate(mes = as.character(mes),
# ano = as.character(ano)) %>%
group_by(ano, mes) %>%
summarise(across(everything(), ~mean(.x, na.rm = TRUE))) %>%
ungroup()
library(tidyverse)
# Lendo dados
ibra <- read_delim("C:/Users/nicho/Documents/MastersDegree/DataInputs/Dados Índice Brasil Amplo (IBrA)/Cotacoes18a25.csv",
delim=";")
# Preprocessamento: Arrumando variável de data (lubridate::dmy = "day, month, year")
ibra2 <- ibra %>%
mutate(Data = Data %>% str_replace_all("/", "-") %>% dmy()
)
colunas_mercado <- c("CDI 252 dias",
"IBOV",
"IBRA")
# Dataframe de retornos ($\frac{P_t}{P_{t-1}} - 1$)
retornos_diarios <- ibra2 %>%
arrange(Data) %>%
mutate(across(-Data, ~ .x/lag(.x) - 1),
mes = month(Data),
ano = year(Data)) %>%
relocate(mes, .after = Data) %>%
relocate(ano, .after = mes)
# Ações do portfolio
acoes_escolhidas <- c("GFSA3",
"GGBR4",
"GOAU4",
"GRND3",
"GUAR3")
portfolio <- retornos_diarios %>%
arrange(Data) %>%
select(Data,
mes,
ano,
all_of(acoes_escolhidas),
all_of(colunas_mercado)
)
# Retornos
retornos_acoes <- portfolio %>%
select(c(mes,
ano,
all_of(acoes_escolhidas))
)
View(retornos_acoes)
# Informações de mercado
mercado <- portfolio %>%
select(c(mes,
ano,
all_of(colunas_mercado))
)
# Agregados mensais
retornos_mensais <- retornos_acoes %>%
select(-Data) %>%
# mutate(mes = as.character(mes),
# ano = as.character(ano)) %>%
group_by(ano, mes) %>%
summarise(across(everything(), ~mean(.x, na.rm = TRUE))) %>%
ungroup()
# Agregados mensais
retornos_mensais <- retornos_acoes %>%
# mutate(mes = as.character(mes),
# ano = as.character(ano)) %>%
group_by(ano, mes) %>%
summarise(across(everything(), ~mean(.x, na.rm = TRUE))) %>%
ungroup()
View(retornos_mensais)
mercado_mensal <- mercado %>%
select(-Data) %>%
# mutate(mes = as.character(mes),
# ano = as.character(ano)) %>%
group_by(ano, mes) %>%
summarise(across(everything(), ~mean(.x, na.rm = TRUE))) %>%
ungroup()
View(mercado)
# Retornos
retornos_acoes <- portfolio %>%
select(c(Data,
mes,
ano,
all_of(acoes_escolhidas))
)
# Informações de mercado
mercado <- portfolio %>%
select(c(Data,
mes,
ano,
all_of(colunas_mercado))
)
View(mercado)
View(ibra2)
View(mercado)
View(retornos_mensais)
View(retornos_acoes)
View(retornos_mensais)
matriz_covariancia_portfolio <- retornos_mensais %>% cov
View(matriz_covariancia_portfolio)
matriz_covariancia_portfolio <- retornos_mensais %>%
select(-mes, -ano) %>% cov
View(matriz_covariancia_portfolio)
ungroup()
# Agregados mensais
## 1) Mercado
mercado_mensal <- mercado %>%
group_by(ano, mes) %>%
summarise(across(everything(), ~prod(1 + .x) - 1)) %>%
ungroup()
# Agregados mensais
## 1) Mercado
mercado_mensal <- mercado %>%
group_by(ano, mes) %>%
summarise(across(all_of(colunas_mercado), ~prod(1 + .x) - 1)) %>%
ungroup()
View(mercado_mensal)
View(mercado)
# Lendo dados
ibra <- read_delim("C:/Users/nicho/Documents/MastersDegree/DataInputs/Dados Índice Brasil Amplo (IBrA)/Cotacoes18a25.csv",
delim=";")
# Preprocessamento: Arrumando variável de data (lubridate::dmy = "day, month, year")
ibra2 <- ibra %>%
mutate(Data = Data %>% str_replace_all("/", "-") %>% dmy()
)
colunas_mercado <- c("CDI 252 dias",
"IBOV",
"IBRA")
# Informações de mercado
mercado <- ibra2 %>%
select(c(Data,
mes,
ano,
all_of(colunas_mercado))
)
# Preprocessamento: Arrumando variável de data (lubridate::dmy = "day, month, year")
ibra2 <- ibra %>%
mutate(Data = Data %>% str_replace_all("/", "-") %>% dmy()
mes = month(Data),
# Preprocessamento: Arrumando variável de data (lubridate::dmy = "day, month, year")
ibra2 <- ibra %>%
mutate(Data = Data %>% str_replace_all("/", "-") %>% dmy(),
mes = month(Data),
ano = year(Data))
colunas_mercado <- c("CDI 252 dias",
"IBOV",
"IBRA")
# Informações de mercado
mercado <- ibra2 %>%
select(c(Data,
mes,
ano,
all_of(colunas_mercado))
)
View(mercado)
# Dataframe de retornos ($\frac{P_t}{P_{t-1}} - 1$)
retornos_diarios <- ibra2 %>%
arrange(Data) %>%
mutate(across(-Data, ~ .x/lag(.x) - 1)) %>%
relocate(mes, .after = Data) %>%
relocate(ano, .after = mes)
# Ações do portfolio
acoes_escolhidas <- c("GFSA3",
"GGBR4",
"GOAU4",
"GRND3",
"GUAR3")
portfolio <- retornos_diarios %>%
arrange(Data) %>%
select(Data,
mes,
ano,
all_of(acoes_escolhidas),
all_of(colunas_mercado)
)
# Retornos
retornos_acoes <- portfolio %>%
select(c(Data,
mes,
ano,
all_of(acoes_escolhidas))
)
# Agregados mensais
## 1) Mercado
mercado_mensal <- mercado %>%
group_by(ano, mes) %>%
summarise(across(all_of(colunas_mercado), ~prod(1 + .x) - 1)) %>%
ungroup()
View(mercado_mensal)
View(mercado)
View(mercado)
View(ibra)
View(ibra)
# Agregados mensais
## 1) Mercado
mercado_mensal <- mercado %>%
group_by(ano, mes) %>%
summarise(across(all_of(colunas_mercado), ~prod(1 + .x/100) - 1)) %>%
ungroup()
View(mercado_mensal)
mercado
